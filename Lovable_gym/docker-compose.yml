services:
  backend:
    build: ./backend
    ports:
      - "5001:5001"
    env_file:
      - ./backend/.env
    environment:
      # Override SQL server for Docker environment if you are running SQL Server on your host machine.
      # If your SQL server is on a different machine in your network, you can remove this line
      # and set the correct IP in your .env file.
      - ETIME_SQL_SERVER=host.docker.internal\SQLEXPRESS
      # The frontend URL as seen by the user's browser
      - FRONTEND_URL=http://localhost:5173
    # 'host.docker.internal' allows the container to connect to services on the host machine.
    # This is necessary for the backend container to reach the SQL Server running on your computer.
    extra_hosts:
      - "host.docker.internal:host-gateway"
    # Auto-restart policy: restart container unless it was explicitly stopped
    restart: unless-stopped

  frontend:
    build: ./frontend
    ports:
      - "5173:80"
    depends_on:
      - backend
    # Auto-restart policy: restart container unless it was explicitly stopped
    restart: unless-stopped
